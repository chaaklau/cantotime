<!DOCTYPE html>
<html lang='yue-Hant-HK'>
<head>
<title>Cantonese Time 廣東話時間</title>
<script src='clock.js' type='text/javascript'></script>
<script type='text/javascript'>
function updateText(hzr){
  document.getElementById('clock').innerHTML= new Date().toLocaleTimeString('en-uk', { hour: 'numeric', hour12: true, minute: 'numeric', second: 'numeric' }); 
  document.getElementById('canto').innerHTML=hzr2canto(hzr);
}

function extractCantoString(hzr) {
  var cantoString = hzr2canto(hzr);
  var regex = /[a-z]{1,6}[1-6]/g
  var jp = '';
  var match = regex.exec(cantoString);
  while (match != null) {
    jp += match[0] + ' ';
    match = regex.exec(cantoString);
  }
  return jp;
}

function playSound(hzr){
  console.log(extractCantoString(hzr));
}

function updateTime(){

  var hzr = getTime();
  if (typeof g_time === 'undefined') { 
    g_time = hzr.toString();
    playSound(hzr);
  }
  if (g_time.split(",")[2] != hzr[2]){
    playSound(hzr);
  }
  if (g_time !== hzr.toString()) {
    g_time = hzr.toString();
    updateText(hzr);
  }
  setTimeout(function(){ updateTime(); }, 1000);
}
</script>
<style>
body {background-color:#000022; text-align:center; font-family:serif; } 
h1 {color:white; font-size:4em; font-family:sans-serif; } 
h2 {color:yellow; font-size:6em;} 
p {color:lightgray; font-size:1.3em; }
em {font-weight: bold; font-style: normal; text-decoration: underline; }
ruby { display: inline-flex; flex-direction: column-reverse; }
rt {font-size:0.3em; color:#FFFFDD;display: inline;line-height: 0.5em;}
</style>
</head>
<body onload='updateTime()'>
<!--textarea id='input'></textarea-->
<!--button type='button' onclick='convert();'>Check</button-->
<h2 id='clock'></h2>
<h1 id='canto'></h1>
<hr>
<p>In Cantonese, one hour is divided into twelve <em>字</em> (or <em>zi6</em>, = 5 minutes). <br>To tell the time, simply look at the clockface and read out what numbers the two hands are pointing at. </p>
</body>
</html>